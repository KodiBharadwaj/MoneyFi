<div class="calendar-container">
  <!-- Calendar Header -->
  <div class="calendar-header">
    <button class="nav-btn" (click)="previousMonth()">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <polyline points="15 18 9 12 15 6"></polyline>
      </svg>
    </button>
    
    <div class="month-year">
      <span class="month-name">{{ currentMonthName }}</span>
      <span class="year">{{ currentYear }}</span>
    </div>
    
    <button class="nav-btn" (click)="nextMonth()">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <polyline points="9 18 15 12 9 6"></polyline>
      </svg>
    </button>
  </div>

  <button class="today-btn" (click)="goToToday()">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
      <line x1="16" y1="2" x2="16" y2="6"></line>
      <line x1="8" y1="2" x2="8" y2="6"></line>
      <line x1="3" y1="10" x2="21" y2="10"></line>
    </svg>
    Today
  </button>

  <!-- Weekday Headers -->
  <div class="weekdays">
    <div class="weekday" *ngFor="let day of weekDays">
      {{ day }}
    </div>
  </div>

  <!-- Calendar Grid -->
  <div class="calendar-grid">
    <div
      *ngFor="let day of calendarDays"
      class="calendar-day"
      [class.empty]="!day"
      [class.has-sync]="hasSyncData(day)"
      [class.no-sync]="day && !hasSyncData(day)"
      [class.today]="isToday(day)"
      [class.clickable]="day !== null"
      (click)="selectDay(day)"
    >
      <ng-container *ngIf="day">
        <span class="day-number">{{ day.getDate() }}</span>
        
        <div class="sync-indicator" *ngIf="hasSyncData(day)">
          <svg class="check-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
            <polyline points="20 6 9 17 4 12"></polyline>
          </svg>
          <span class="count-badge">
            {{ getHistoryForDay(day)?.syncCount }}
          </span>
        </div>
      </ng-container>
    </div>
  </div>

  <!-- Legend -->
  <div class="calendar-legend">
    <div class="legend-item">
      <div class="legend-color synced"></div>
      <span>Synced</span>
    </div>
    <div class="legend-item">
      <div class="legend-color not-synced"></div>
      <span>Not Synced</span>
    </div>
    <div class="legend-item">
      <div class="legend-color today-color"></div>
      <span>Today</span>
    </div>
  </div>
</div>