<div class="admin-container">
  <nav class="top-nav">
    <div class="brand">MoneyFi Admin</div>
  </nav>

  <div class="layout">
    <aside class="side-nav">
      <ul class="nav-list">
        <li routerLink="/admin/home">Dashboard</li>
        <li [routerLink]="['/admin/users', 'All']">Total Users</li>
        <li [routerLink]="['/admin/requests', 'All']">User Requests</li>
        <li routerLink="/admin/user-defects">User Issues</li>
        <li routerLink="/admin/feedbacks">User Feedbacks</li>
        <li routerLink="/admin/insights">Insights/Charts</li>
        <li routerLink="/admin/configuration">Configuration</li>
      </ul>
      <ul class="logout-list">
        <li (click)="logoutUser()">Logout</li>
      </ul>
    </aside>

    <main class="main-content">
        <h2 class="page-title">Configuration</h2>

        <div class="config-grid">
            <!-- Config Card 1 -->
            <div class="config-card">
            <h3>Schedule Notifications</h3>
            <p>Schedule notifications to users</p>
            <button class="config-btn primary" (click)="openScheduleNotificationDialog()">
                Schedule
            </button>
            </div>

            <div class="config-card">
            <h3>Expired Notifications</h3>
            <p>History & Reuse Expired Notifications</p>
            <button
              class="config-btn primary"
              (click)="toggleExpiredNotifications()"
            >
              History
            </button>

            </div>

            <!-- Config Card 2 -->
            <div class="config-card">
            <h3>Manage Reasons</h3>
            <p>Create, update and delete reasons</p>
            <button class="config-btn primary" [routerLink]="'/admin/configuration/reasons'">
                Manage
            </button>
            </div>

            <!-- Config Card 3 -->
            <div class="config-card">
            <h3>Manage Categories</h3>
            <p>Create, Update and Delete financial categories</p>
            <!-- <p style="color: red;"> *Under development </p> -->
            <button class="config-btn primary" [routerLink]="'/admin/configuration/categories'">
                Manage
            </button>
            </div>
        </div>

        <div
          class="expired-section"
          *ngIf="showExpiredNotifications"
        >
          <h3 class="section-title">Expired Notifications</h3>

          <!-- Loader -->
          <div *ngIf="isExpiredLoading" class="loading">
            Loading expired notifications...
          </div>

          <!-- Empty State -->
          <div
            *ngIf="!isExpiredLoading && expiredSchedules.length === 0"
            class="empty-state"
          >
            No expired notifications found
          </div>

          <!-- Table -->
          <table
            *ngIf="!isExpiredLoading && expiredSchedules.length > 0"
            class="expired-table"
          >
            <thead>
              <tr>
                <th>Subject</th>
                <th>Description</th>
                <th>From</th>
                <th>To</th>
                <th>Status</th>
                <th>Actions</th>
              </tr>
            </thead>

            <tbody>
              <tr *ngFor="let schedule of expiredSchedules">
                <td>{{ schedule.subject }}</td>
                <td class="desc">{{ schedule.description }}</td>
                <td>{{ schedule.scheduleFrom | date:'short' }}</td>
                <td>{{ schedule.scheduleTo | date:'short' }}</td>
                <td>
                  <span class="status expired">Expired</span>
                </td>
                <td>
                <button
                  class="reuse-btn"
                  (click)="reuseSchedule(schedule)"
                >
                  Reuse
                </button>
              </td>
              </tr>
            </tbody>
          </table>
        </div>
        </main>
  </div>
</div>
