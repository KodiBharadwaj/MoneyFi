<div class="config-container">

  <h2 class="config-title">Account Configuration</h2>

  <!-- Change Password -->
  <div class="config-card">
    <h3>Security 
        <span class="hint-text">(Change your password here)</span>
    </h3>
    <button class="config-btn primary" (click)="changePassword()">
       Change Password
    </button>
  </div>

  <!-- Change your name -->
<div class="config-card">
  <h3>
    Name Change 
    <span class="hint-text">(By clicking, you are redirected to requests page)</span>
  </h3>

  <button class="config-btn primary" (click)="changeMyName()">
    Change my name
  </button>

  <div class="track-section">
    <button class="config-btn secondary-track" (click)="trackNameChangeRequest()">
      Track Request
    </button>
  </div>
</div>


  <!-- Block Account -->
  <div class="config-card">
    <h3>
      Account Management
      <span class="hint-text">(Block your account in case of emergency)</span>
    </h3>

    <button
      class="config-btn danger"
      (click)="initiateAccountBlock()"
      [disabled]="loadingBlockRequest"
    >
      <span *ngIf="!loadingBlockRequest">Block Account</span>
      <span *ngIf="loadingBlockRequest" class="spinner"></span>
    </button>

    <div *ngIf="blockRequestSent" class="block-inputs">
      <input
        type="text"
        [(ngModel)]="otp"
        placeholder="Enter OTP"
        class="block-input"
      />

      <!-- Dropdown for reasons -->
      <select [(ngModel)]="selectedReason" class="block-input">
        <option value="" disabled selected>Select a reason</option>
        <option *ngFor="let reason of reasons" [value]="reason">{{ reason }}</option>
      </select>

      <!-- Show extra input if "Other" selected -->
      <input
        *ngIf="selectedReason === 'Other'"
        type="text"
        [(ngModel)]="description"
        placeholder="Enter custom reason"
        class="block-input"
      />

      <button class="config-btn confirm" (click)="confirmAccountBlock()">
        Confirm
      </button>
    </div>
  </div>



 <!-- Profile Update -->
<div class="config-card">
  <h3>
    Profile Update
    <span class="hint-text">(Update your profile data with excel template)</span>
  </h3>

  <!-- Download Button -->
  <button 
    class="config-btn secondary" 
    (click)="downloadProfileTemplate()" 
    [disabled]="isDownloading">
    <ng-container *ngIf="!isDownloading; else downloadSpinner">
      Download Profile Template
    </ng-container>
    <ng-template #downloadSpinner>
      <span class="spinner"></span> Downloading...
    </ng-template>
  </button>

  <div class="upload-section">
    <input 
      type="file" 
      id="fileUpload" 
      (change)="onFileSelected($event)" 
      accept=".xlsx" 
      hidden 
    />
    <label for="fileUpload" class="file-label">ðŸ“‚ Choose File</label>
    <span class="file-name" *ngIf="selectedFile">{{ selectedFile.name }}</span>

    <!-- Upload Button -->
    <button 
      class="config-btn upload" 
      (click)="uploadUserProfileExcel()" 
      [disabled]="!selectedFile || isUploading">
      <ng-container *ngIf="!isUploading; else uploadSpinner">
        Upload
      </ng-container>
      <ng-template #uploadSpinner>
        <span class="spinner"></span> Uploading...
      </ng-template>
    </button>
  </div>
</div>


  <div class="config-card">
    <h2>Raise a Report/Feedback</h2>
    
    <!-- Dropdown to select form type -->
    <label for="formSelector">Choose an option:</label>
    <!-- <select id="formSelector" (change)="selectForm($event.target.value)"> -->
        <select id="formSelector" (change)="selectForm($event)">
      <option value="">-- Select --</option>
      <option *ngFor="let option of formOptions" [value]="option.value">
        <ng-container *ngIf="option.label === 'Contact Form'; else feedback">
            Raise a Report
        </ng-container>
        <ng-template #feedback>Feedback</ng-template>
      </option>

    </select>
  
    <!-- Dynamically display selected form -->
    <div class="form-container">
      <app-contact-form *ngIf="selectedForm === 'contact'"></app-contact-form>
    <app-feedback-form *ngIf="selectedForm === 'feedback'"></app-feedback-form>
      <!-- <app-survey-form *ngIf="selectedForm === 'survey'"></app-survey-form> -->
    </div>
  </div>

</div>
